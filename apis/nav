
wayPointPath = core.coreDir() .. '/modules/turtleTools/apis/.wayPoints'

local function saveWaypoints(points)
	configman.load(wayPointPath, points)
end

local function loadWaypoints()
	configman.load(wayPointPath)
end

function addWaypoint(wayPointTable, nameArg, coordVector, directionArg )
	if wayPointTable == nil or n == nil or c == nil then return false end
	point ={}
	point.name = nameArg
	point.coord = coordVector
	if directionArg ~= nil then point.direction = directionArg end
	table.insert (wayPointTable, point)
	return configman.save(wayPointPath)
end


function turn(f)
	while f ~= tonumber(pos.getPosition().direction) do
		pos.turnRight()
	end
end

function moveTowardsX(x, agressive)
	currentX = pos.getX()
	if x > currentX then
		turn(3)
	elseif x < currentX then
		turn(1)
	end
	return pos.forward(1,agressive)
end

function moveTowardsZ(z, agressive)
		currentZ = pos.getZ()
		if z > currentZ then
			turn(0)
		elseif z < currentZ then
			turn(2)
		end
		return pos.forward(1, agressive)
end

function moveTowardsY(y, agressive)
		currentY = pos.getY()
		if y > currentY then
			return pos.up(1, agressive)
		elseif y < currentY then
			return pos.down(1, agressive)
		end
end

function gotoX(x, agressive)
	while pos.getX() ~= x do
		moveTowardsX(x,agressive)
	end
end

function gotoY(y, agressive)
	while pos.getY() ~= y do
		moveTowardsY(y,agressive)
	end
end

function gotoZ(z, agressive)
	while pos.getZ() ~= z do
		moveTowardsZ(z,agressive)
	end
end


function gotoPos(obj, agressive)
	gotoX(obj.coord.x, agressive)
	gotoZ(obj.coord.z, agressive)
	gotoY(obj.coord.y, agressive)
	turn(obj.direction)
end
